---
layout: post
title: Running GlassFish as a service on Windows (Error 1067)
date: '2012-03-16T05:42:00.001Z'
author: Igor Duarte Cardoso
tags:
- GlassFish
- Windows
modified_time: '2012-03-20T23:02:40.414Z'
thumbnail: http://1.bp.blogspot.com/-0Lhzf5L_D3s/T2S_88OA1oI/AAAAAAAAAMc/uASq8Is8VZ0/s72-c/glassfish_service_error.png
blogger_id: tag:blogger.com,1999:blog-7503515668102711213.post-7181399474455411461
blogger_orig_url: http://igordcard.blogspot.com/2012/03/run-glassfish-as-service-on-windows.html
---

I've been trying to run GlassFish as a service on Windows:<br /><br /><code>asadmin.bat create-service </code><br /><br />Unfortunately, that task didn't show up easy due to one little detail: GlassFish was installed on the famous Program Files folder. Other causes may just need a restart of Windows.<br /><br />When starting the service, it says: <b>Error 1067: The process terminated unexpectedly. </b>And it really terminates.<br /><br /><a name='more'></a><br />Because there is a space character between Program and Files, the path to GlassFish also has spaces. The way GlassFish is called when requested via the service start makes it impossible to resolve the path correctly if there are spaces and other special characters, on Windows.<br /><br />First of all, make sure you restarted your Windows after installing GlassFish as a service. I also had this problem when not using spaces in the path. After restarting the system, everything got fixed by itself.<br /><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-0Lhzf5L_D3s/T2S_88OA1oI/AAAAAAAAAMc/uASq8Is8VZ0/s1600/glassfish_service_error.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="127" src="../assets/glassfish_service_error.png" width="320" /></a></div><br /><br /><b>Update: </b>The following content, in a gray font, is composed of some workarounds for solving this problem. These workarounds are not required anymore because&nbsp;Byron Nevins just found out the right fix for this problem. Skip to the <b>Solution.</b><br /><br /><br /><blockquote class="tr_bq"><span style="color: #999999;">I will not present the perfect solution, but some possible workarounds for this, although I encourage you to share your experiences below in the comments:<br /><br /><b>1.</b>Just move your whole GlassFish installation to a directory with no spaces behind. It'll just work, no issues.<br /><br /><b>2.</b>If you really want GlassFish to live in your old directory, you can create a symbolic link to that directory and put it in a legal path.<br /><code>mklink /d C:\glassfish-3.1.2 C:\"Program Files"\glassfish-3.1.2</code><br />Now, create the service using the usual method and still at the old path:<br /><code>asadmin.bat create-service</code><br />And edit the file <code>C:\Program Files\glassfish-3.1.2\glassfish\domains\domain1\bin\domain1Service.xml</code> (assuming base path is <code>C:\Program Files</code>):</span><br /><ul><li><span style="color: #999999;">Remove every occurrence of: <code>Program Files\\</code> or <code>Program Files/</code>, thus making the service executable point to your new symbolic link.</span></li></ul><span style="color: #999999;"><br /><b>3.</b>Create a service by hand, using <code>sc</code> (don't forget the space before the equal signs):<br /><br /><code>sc create MyGlassFishServiceName binPath= "C:\Program Files\glassfish-3.1.2\bin\asadmin.bat start-domain domain1" start= auto</code><br />This will create a service based on the usual GlassFish administration script, <code>asadmin</code>, so it's not a clean way and some errors may be thrown when manually starting the service. Also, it cannot be stopped. If you just want GlassFish to run as a service at startup, then this probably fits you enough. <b>Update:</b>&nbsp;Thanks to the fellow follower Micael Capit√£o that pointed out some typos in my command.<br /><br /><b>The Perfect Way.</b>By editing the file I mentioned above, <code>domain1Service.xml</code>, we should be able to escape the spaces from from the path (usual escaping doesn't seem to work). Also, that could come as default in future versions of the splendid Oracle GlassFish (and the open source edition too, for that matter). Oracle already knows of the problem, like one of the following links reveals. If anybody knows/discovers how this can be achieved, please post in the comments below.</span></blockquote><span style="color: #666666;"><br /></span><br /><b>Solution</b><br /><ul><li>After creating the service, edit the file:<br />&nbsp;<code>C:\Program Files\glassfish-3.1.2\glassfish\domains\domain1\bin\domain1Service.xml</code><br />(assuming glassfish is installed at <code>C:\Program Files\glassfish-3.1.2</code>)</li><br /><li>Find the line:<br /><code>&lt;startargument&gt;C:\\Program Files\\glassfish-3.1.2\\glassfish\\domains&lt;/startargument&gt;</code></li><br /><li>Add double quotes around the path, like this:<br /><code>&lt;startargument&gt;"C:\\Program Files\\glassfish-3.1.2\\glassfish\\domains"&lt;/startargument&gt;</code></li><br /><li>Do the same for the line:<br /><code>&lt;stopargument&gt;C:\\app\\big glass\\glassfish\\glassfish\\domains&lt;/stopargument&gt;</code></li></ul><br /><br />Some useful links:<br /><a href="http://how%20do%20i%20run%20glassfish%20as%20a%20windows%20service/?">How do I run GlassFish as a Windows service? (Oracle)</a><br /><a href="http://support.microsoft.com/kb/251192">How to create a Windows service by using Sc.exe (Microsoft)</a>