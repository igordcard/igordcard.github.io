---
layout: post
title: Loading app/web page from Android intent when app is disabled
date: '2014-02-18T16:42:00.000Z'
author: Igor Duarte Cardoso
tags:
- Development
- Android
modified_time: '2014-02-18T16:46:29.664Z'
blogger_id: tag:blogger.com,1999:blog-7503515668102711213.post-8823327043645617354
blogger_orig_url: http://igordcard.blogspot.com/2014/02/loading-appweb-page-from-android-intent.html
---

In Android, it's pretty easy to load a page from Facebook or Twitter or a similar one, from our very own app. By passing an intent with the request, the related app will automatically show up with the desired content. If the app is not installed we can detect that scenario so that, for instance, the browser starts up and loads the link for the wanted page. With Google+ &nbsp;it's even simpler, as we just need to pass the web URL. Android then selects if it should use the Google+ app or a browser (taking into account users' preferences).<br /><br />However, what if the app is installed but has been disabled (for example through App Quarantine)?<br /><a name='more'></a><br />Let's consider Facebook as the app/website to load from our Android application.<br /><br />Typical code for loading a page is something like the following: <br /><pre class="prettyprint">Intent intent;<br />try {<br />    getPackageManager().getPackageInfo("com.facebook.katana", 0);<br />    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("fb://profile/620681997952698"));<br />} catch (NameNotFoundException e) {<br />    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://www.facebook.com/620681997952698"));<br />}<br />try {<br />    startActivity(intent);<br />} catch (ActivityNotFoundException e) {<br />    Toast.makeText(getApplicationContext(),<br />            getString(R.string.facebook_error), Toast.LENGTH_LONG).show();<br />}<br /></pre><br />Which works most of the time: with or without the app installed.<br /><br />However, if the user has Facebook installed but disabled (for example by using App Quarantine), this method will not work. The intent for the Facebook app will be selected but it will not be able to process it as it is disabled, ultimately resulting in the <code>Toast</code> above.<br /><br />So, a quick fix (and the whole point of this post) is to detect if the app has been disabled and then choose to use the web URL:<br /><br /><b>Instead of:</b><br /><pre class="prettyprint">getPackageManager().getPackageInfo("com.facebook.katana", 0);<br />intent = new Intent(Intent.ACTION_VIEW, Uri.parse("fb://profile/620681997952698"));<br /></pre><br /><b>You can use the following to decide what to do:</b><br /><pre class="prettyprint">PackageInfo info = getPackageManager().getPackageInfo("com.facebook.katana", 0);<br />if(info.applicationInfo.enabled)<br />    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("fb://profile/620681997952698"));<br />else<br />    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://www.facebook.com/620681997952698"));<br /></pre><br />This process is similar for other apps (not required for Google+).  <br /><br /><b>Some links:</b><ul><li><a href="http://stackoverflow.com/questions/4810803/open-facebook-page-from-android-app">Open Facebook page from Android app?</a></li><li><a href="http://stackoverflow.com/questions/11105103/open-page-in-twitter-app-from-other-app-android">Open page in Twitter app from other app - Android</a></li><li><a href="http://stackoverflow.com/questions/11867989/open-google-plus-page-via-intent-in-android">Open google plus page via intent in android</a></li><li><a href="https://play.google.com/store/apps/details?id=com.ramdroid.appquarantine">App Quarantine</a></li></ul>