---
layout: post
title: Google Earth Plug-in and the ATL 10.00
date: '2012-05-18T14:53:00.004+01:00'
author: Igor Duarte Cardoso
tags:
- JavaScript
- WPF
- Google Earth
- Internet Explorer
modified_time: '2012-05-18T18:15:37.720+01:00'
thumbnail: http://2.bp.blogspot.com/-XUkfEGserhY/T7ZT8JxZcbI/AAAAAAAAAPM/FvlMz9vI6xQ/s72-c/atl.png
blogger_id: tag:blogger.com,1999:blog-7503515668102711213.post-8969977213422684826
blogger_orig_url: http://igordcard.blogspot.com/2012/05/google-earth-plug-in-and-atl-1000.html
---

<br />While playing with the Google Earth Plug-in to integrate in a <code>WebBrowser</code> control of a WPF application I'm currently developing, I started getting this strange background text instead of the map/earth: <code>ATL 10.00</code>. <br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-XUkfEGserhY/T7ZT8JxZcbI/AAAAAAAAAPM/FvlMz9vI6xQ/s1600/atl.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://2.bp.blogspot.com/-XUkfEGserhY/T7ZT8JxZcbI/AAAAAAAAAPM/FvlMz9vI6xQ/s1600/atl.png" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">ATL 10.00</td></tr></tbody></table>I needed to do <strike>two things to get my page working.</strike>&nbsp;one simple thing.<br /><br /><a name='more'></a><br /><b>Update: </b>&nbsp;It seems my previous method could still fail in some random times and even throw beautiful IE script errors, so here's what's really going on:<br /><br />The <code>WebBrowser</code> control will by default, for compatibility reasons, render pages as in Internet Explorer 7 standards. The Google Earth plug-in seems to currently have some compatibility issues with IE7, therefore problems can arise. In this case, the <code>ATL 10.00</code> stays above the map, blanking it.<br /><br /><b>The Fix</b><br />Use the most recent version of Internet Explorer. In order to do this, you must declare a <code>meta</code> tag in your HTML page like the following (this enables IE9 in <code>WebBrowser</code> when it loads the page): <br /><pre class="prettyprint">&lt;meta http-equiv="X-UA-Compatible" content="IE=9"/&gt;<br /></pre><b><br /></b><br /><span style="color: #999999;"><b>First</b>, I used a workaround which consists in delaying the creation of the Google Earth plug-in, thus avoiding a race condition as mentioned in <a href="http://www.blogger.com/Issue%20701:plugin%20displays%20white%20window%20with%20ATL%2010.00%20text">issue 701</a> from the earth-api-samples:</span><br /><span style="color: #999999;"><br /></span><br /><pre style="border: 1px solid grey; color: grey;"><span style="color: #999999;">function Init() {<br />    if (google.earth.isSupported()) {<br />        // timeout is required or google earth plugin may get into a race condition and die<br />        setTimeout("google.earth.createInstance('map3d', initCB, failureCB); alert('done');", 500);<br />    }<br />}<br /><br />/* other functions like initCV and failureCB */<br /><br />google.setOnLoadCallback(Init);<br />google.load("earth", "1");<br /></span></pre><span style="color: #999999;"><br /></span><br /><span style="color: #999999;"><b>Second</b>, I made sure the <code>#map_canvas</code> is above everything, especially during loading.</span><br /><span style="color: #999999;"><br /></span><br /><span style="color: #999999;">My application initially hides the <code>WebBrowser</code>. If I displayed the <code>WebBrowser</code> before the loading timeout, I could see the map alright... but if I waited longer than the loading timeout and then displayed the map, I just got the <code>ATL 10.00</code>.</span><br /><span style="color: #999999;"><br /></span><br /><span style="color: #999999;">So I thought, maybe the map is always being rendered but the <code>ATL 10.00</code> layer is above it. I set <code>#map_canvas</code> the style <code>z-index: -1</code> and it worked properly!</span><br /><span style="color: #999999;"><br /></span><br /><pre style="border: 1px solid grey; color: grey;"><span style="color: #999999;">#map_canvas {<br />  z-index: -1;<br />  /* etc */<br />}<br /></span></pre><span style="color: #999999;"><br /></span><br /><span style="color: #999999;">My JS scripts are simple and small and I cannot reproduce ATL 10.00 in native Internet Explorer (in my case IE9) because, I suppose, the map is always visible with positive dimensions (instead of what happens in my WPF application).</span><br /><br /><b>Useful links:</b><br /><br /><ul><li><b><a href="http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx">Defining Document Compatibility</a></b></li><li><b><a href="http://stackoverflow.com/questions/4612255/regarding-ie9-webbrowser-control">Regarding IE9 WebBrowser control</a></b></li><li><b><a href="http://code.google.com/p/earth-api-samples/issues/detail?id=701#makechanges">Issue 701: plugin displays white window with ATL 10.00 text</a></b></li></ul>