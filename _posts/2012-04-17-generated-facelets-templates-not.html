---
layout: post
title: Generated Facelets templates not applying / can't find CSS stylesheets
date: '2012-04-17T16:04:00.000+01:00'
author: Igor Duarte Cardoso
tags:
- Facelets
- JSF
- NetBeans
modified_time: '2012-06-06T19:27:38.483+01:00'
blogger_id: tag:blogger.com,1999:blog-7503515668102711213.post-4367959501120683173
blogger_orig_url: http://igordcard.blogspot.com/2012/04/generated-facelets-templates-not.html
---

<div>Using NetBeans, I created a Facelets template and a Facelets template client through the wizards provided. No changes were made to the source code.</div><div><br /></div><div>However, when navigating in the generated template client with my browser, I noticed that the sections "inserted" (e.g, header, footer, content) were not being&nbsp;stylized in any way.</div><div><br /></div><div>After a great deal of head banging onto the wall, I finally found a solution for this.</div><div><a name='more'></a>I checked the generated HTML source code in my browser (from <code>/faces/index.xhtml</code>, my template client) &nbsp;to see where the CSS files were being pointed at:</div><div><pre style="border: 1px solid black;">http://localhost:8080/MyContextRoot/faces/resources/css/default.css<br />http://localhost:8080/MyContextRoot/faces/resources/css/cssLayout.css<br /></pre></div><div><br />These files were not publicly available, so the browser couldn't load them to process the styles. This was all generated by NetBeans. My&nbsp;<code>/faces/index.xhtml</code> was generated dynamically with sucess, so it wasn't a problem with the mapping of the Faces servlet.<br /><br />After comparing my project files, specifically the <code>WEB-INF/web.xml,</code> with an empty project I came to the conclusion that the cause of the problem was a conflict in servlet URL patterns. This is how my <code>web.xml</code> looked like:<br /><pre class="prettyprint">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"<br />xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br />xsi:schemaLocation="http://java.sun.com/xml/ns/javaee<br />http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"&gt;<br />    &lt;context-param&gt;<br />        &lt;param-name&gt;javax.faces.PROJECT_STAGE&lt;/param-name&gt;<br />        &lt;param-value&gt;Development&lt;/param-value&gt;<br />    &lt;/context-param&gt;<br />    &lt;servlet&gt;<br />        &lt;servlet-name&gt;ServletAdaptor&lt;/servlet-name&gt;<br />        &lt;servlet-class&gt;com.sun.jersey.spi.container.servlet.ServletContainer&lt;/servlet-class&gt;<br />        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;<br />    &lt;/servlet&gt;<br />    &lt;servlet&gt;<br />        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;<br />        &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;<br />        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;<br />    &lt;/servlet&gt;<br />    &lt;servlet-mapping&gt;<br />        &lt;servlet-name&gt;ServletAdaptor&lt;/servlet-name&gt;<br />        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;<br />    &lt;/servlet-mapping&gt;<br />    &lt;servlet-mapping&gt;<br />        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;<br />        &lt;url-pattern&gt;/faces/*&lt;/url-pattern&gt;<br />    &lt;/servlet-mapping&gt;<br />    &lt;session-config&gt;<br />        &lt;session-timeout&gt;10&lt;/session-timeout&gt;<br />    &lt;/session-config&gt;<br />    &lt;welcome-file-list&gt;<br />        &lt;welcome-file&gt;faces/index.xhtml&lt;/welcome-file&gt;<br />    &lt;/welcome-file-list&gt;<br />&lt;/web-app&gt;<br /></pre><br />The <code>/*</code> URL pattern from the Jersey servlet will basically hide the stylesheets location, so they will not be accessible through the generated template code. <br /><b><br /></b><br /><b>Fixing it</b><br /><b><br /></b><br /><b>1.&nbsp;</b>The best fix is the right one. Go to your <code>WEB-INF/web.xml</code> and fix any superposition of URL patterns. In my case I changed the Jersey URL pattern from:<br /><pre class="prettyprint">    &lt;servlet-mapping&gt;<br />        &lt;servlet-name&gt;ServletAdaptor&lt;/servlet-name&gt;<br />        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;<br />    &lt;/servlet-mapping&gt;<br /></pre>to: <br /><pre class="prettyprint">    &lt;servlet-mapping&gt;<br />        &lt;servlet-name&gt;ServletAdaptor&lt;/servlet-name&gt;<br />        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;<br />    &lt;/servlet-mapping&gt;<br /></pre><br /><b>2. </b>If you don't want to do the above method, open your template file (in my case it was <code>template.xhtml</code>) and replace the following lines:<br /><br /><pre class="prettyprint">&lt;link href="./resources/css/default.css" rel="stylesheet" type="text/css" /&gt;<br />&lt;link href="./resources/css/cssLayout.css" rel="stylesheet" type="text/css" /&gt;</pre>with: <br /><pre class="prettyprint">&lt;h:outputStylesheet name="css/default.css"/&gt;<br />&lt;h:outputStylesheet name="css/cssLayout.css"/&gt;<br /></pre><br />The difference is that now the actual HTML CSS include code will be generated in the server with the correct link for the CSS files. I checked the code that was generated in my case, which was: <br /><pre class="prettyprint">&lt;link type="text/css" rel="stylesheet" href="/MyProject/faces/javax.faces.resource/css/default.css" /&gt;<br />&lt;link type="text/css" rel="stylesheet" href="/MyProject/faces/javax.faces.resource/css/cssLayout.css" /&gt;</pre><br />And it also works. You can use it but it is less portable and depends on the configuration and future releases. <br /><br />I hope that in the future Oracle adds a way to auto-detect these conflicts in NetBeans to ease development for beginner Java EE developers.<br /><br /><b>Useful links:</b><br /><a href="http://stackoverflow.com/questions/3630057/jsf-template-not-applied">JSF template not applied</a><br /><a href="http://forums.netbeans.org/topic32517.html">Styles not getting applied for the Facelets template client</a><br /><a href="http://netbeans.org/kb/docs/web/jsf20-intro.html#template">Applying a Facelets Template</a><br /><span id="goog_1267019327"></span><span id="goog_1267019328"></span></div>