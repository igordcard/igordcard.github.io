---
layout: post
title: Creating a search plugin for Firefox
date: '2011-12-26T15:02:00.000Z'
author: Igor Duarte Cardoso
tags:
- OpenSearch
- Plugins
- Firefox
modified_time: '2012-02-15T00:40:24.939Z'
thumbnail: http://1.bp.blogspot.com/-cy9hN3crDXE/TvinObs6X1I/AAAAAAAAAJw/OxmBu4jqBkM/s72-c/flotsam.png
blogger_id: tag:blogger.com,1999:blog-7503515668102711213.post-6240815279796161163
blogger_orig_url: http://igordcard.blogspot.com/2011/12/creating-search-plugin-for-firefox.html
---

You have probably used multiple search engines with <b>Firefox</b>'s <b>OpenSearch</b> plugins. Many websites currently advertise their own search engines using the <a href="https://developer.mozilla.org/en/Creating_OpenSearch_plugins_for_Firefox#Autodiscovery_of_search_plugins">Autodiscovery</a> method supported by Firefox. You can either add their search engines or you can find some custom ones on <a href="https://addons.mozilla.org/">Add-ons for Mozilla</a>.<br /><br />However, sometimes you just need something different, something that fits your specific needs and can't be found anywhere else. In those cases, the best is to do it yourself.<br /><br /><br /><a name='more'></a>Some browsers, like <a href="http://www.chromium.org/">Chromium</a>, provide an easy way for manually creating search plugins right in the user interface, but with a clean installation of Firefox it isn't that simple.<br />So, how to create a simple Firefox search plugin without wasting much time investigating? I'm gonna give you a hand for that:<br /><br /><b>You will need to create a little <code>XML</code> file for each search engine you want to add.</b><br /><br /><b>Let's take a look at an example that uses Google Translate:</b><br /><br /><pre class="prettyprint">&lt;SearchPlugin<br />    xmlns="http://www.mozilla.org/2006/browser/search/"<br />    xmlns:os="http://a9.com/-/spec/opensearch/1.1/"&gt;<br />&lt;ShortName&gt;Translate&lt;/ShortName&gt;<br />&lt;Description&gt;Google Translate&lt;/Description&gt;<br />&lt;InputEncoding&gt;UTF-8&lt;/InputEncoding&gt;<br />&lt;Image width="16" height="16"&gt;http://translate.google.com/favicon.ico&lt;/Image&gt;<br />&lt;Url type="text/html" method="GET" template="http://translate.google.com/#en|pt|{searchTerms}"&gt;<br />&lt;/Url&gt;<br />&lt;/SearchPlugin&gt;<br /></pre><br />Here I am using Google Translate to always translate whatever text I put in the search box from english to portuguese. You can use it as a model for your own search plugins, it will fit most of the situations, as long as they use the <code>GET</code> method.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="../assets/flotsam.png" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Me searching for the translation of "flotsam"</td></tr></tbody></table><br /><br /><b>Now a look at each section:</b><br /><br /><pre class="prettyprint">&lt;SearchPlugin<br />    xmlns="http://www.mozilla.org/2006/browser/search/"<br />    xmlns:os="http://a9.com/-/spec/opensearch/1.1/"&gt;<br /></pre>Here we define the namespaces for this <code>XML</code>file. Just put it always like this and it will work unless the format changes in the future.<br /><br /><pre class="prettyprint">&lt;ShortName&gt;Translate&lt;/ShortName&gt;<br />&lt;Description&gt;Google Translate&lt;/Description&gt;<br />&lt;InputEncoding&gt;UTF-8&lt;/InputEncoding&gt;<br /></pre>Give a name to your search engine, inside the <code>ShortName</code> tag, a description inside <code>Description</code> and what encoding to use when entering the text to be searched inside <code>InputEncoding</code>. I recommend UTF-8 unless you are into some heavy characters stuff.<br /><br /><pre class="prettyprint">&lt;Image width="16" height="16"&gt;http://translate.google.com/favicon.ico&lt;/Image&gt;<br /></pre>This defines the icon to use with your search engine. Find the URL of the favicon and put it inside the <code>Image</code> tag and Firefox will automatically download the icon. <br /><br /><pre class="prettyprint">&lt;Url type="text/html" method="GET" template="http://translate.google.com/#en|pt|{searchTerms}"&gt;<br />&lt;/Url&gt;<br />&lt;/SearchPlugin&gt;<br /></pre>This is the most important part of the file because it tells what the link is and where to put the your search terms. In the case of Google Translate there are the source language, destination language and search terms, all separated by a pipe (<b>|</b>). I have fixed the languages from "en" to "pt" and where the search terms should be I entered <code>{searchTerms}</code>, which will be parsed by Firefox and replaced by what I enter in Firefox's search box.<br /><br />In order to create an <code>Url</code> tag for other search engine website, you should first make a few tries to see where the link changes (where your search terms are being written). When you find it, just replace the random search terms with <code>{searchTerms}</code>, copy the link and put it inside <code>Url</code> tag <code>template</code> attribute. <br /><br /><b>Well, we have created the <code>XML</code>file. Now we need to know where to put it:</b><br /><br />On <b>Windows</b>, assuming it is installed on the C: drive, you should move the <code>XML</code> file to:<br /><code>C:\Users\yourUsername\AppData\Roaming\Mozilla\Firefox\Profiles\&lt;yourProfileID&gt;.default\searchplugins</code><code>C:\Document and Settings\yourUsername\Application Data\Mozilla\Firefox\Profiles\&lt;yourProfileID&gt;.default\searchplugins</code> (Windows XP/2000/2003) <br /><br />On <b>Linux</b>, the same can be achieved by moving it to:<br /><code>~/.mozilla/firefox/&lt;yourProfileID&gt;.default/searchplugins</code><br /><br />On <b>Mac OS</b>, you can move it to one of these folders:<br /><code>~/Library/Mozilla/Firefox/Profiles/&lt;yourProfileID&gt;.default\searchplugins</code><br /><code>~/Library/Application Support/Firefox/Profiles/&lt;yourProfileID&gt;.default\searchplugins</code><br /><br />If the directory <code>searchplugins</code> directory does not exist, feel free to create it.<br /><br /><b>Attention</b>: If you later change the search plugin file and there are no changes in Firefox (even after restarting it), try to move the file away from the <code>searchplugins</code> directory and close Firefox (thus forcing it to sync everything). Then, before opening it again, move the file back to the <code>searchplugins</code> directory. I have witnessed this behaviour with Firefox 9.0.1 on Windows 7, but not on Arch Linux.<br /><br />Be aware that the <code>XML</code>file I described in here isn't the actual OpenSearch format but rather a Firefox variant for locally stored OpenSearch plugins. However, mostly everything is the same and you can find more information at <a href="https://developer.mozilla.org/en/Creating_OpenSearch_plugins_for_Firefox">MDN</a>.<br />Also, Firefox may change your XML file once it gets loaded and alter things like the favicon URL (replacing it with base64 encoded data, for caching). <br /><br />OpenSearch is supported in Firefox 2.0 and all versions above.<br /><br /><br />This plugin is also available for direct download: <a href="http://igordcard.googlecode.com/files/google-translate-enpt.xml">Here</a>.